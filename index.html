<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Introduction to Python Programming on Raspberry Pi</title>

	<meta name="description" content="Introduction to Python Programming on Raspberry Pi for basic users having little knowledge of programming.">
	<meta name="author" content="Dwij IT Solutions / Ganesh Bhosale">

	<meta property="og:url" content="" />
	<meta property="og:type" content="website" />
	<meta property="og:title" content="Introduction to Python Programming on Raspberry Pi" />
	<meta property="og:description" content="Introduction to Python Programming on Raspberry Pi for basic users having little knowledge of programming."/>
	<meta property="og:image" content="" />

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<!-- help : http://lab.hakim.se/reveal-js -->
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/black.css" id="theme">

	<link rel="stylesheet" href="css/font-awesome.min.css">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement( 'link' );
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>
	<div id="fb-root"></div>
	<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=1684314365174532";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
	</script>

	<div class="reveal">

		<!-- Any section element inside of this container is displayed as a slide -->
		<div class="slides" id="slidesD">
			<section>
				<h1>Python Practice</h1>
				<h3>on Raspberry Pi</h3>
				<p>
					<small>Created by <a target="_blank" href="https://twitter.com/gdbhosale">Ganesh Bhosale</a> in <a target="_blank" href="http://dwijitsolutions.com">Dwij IT Solutions</a></small><br>
					<a href="http://dwijitsolutions.com" target="_blank">
						<img src="images/dwij-it-solutions.png" alt="Dwij IT Solutions Logo">
					</a>
				</p>
			</section>

			<section>
				<h2>Your support</h2>
				<p>
					Like this <a class="cred">Python on Raspberry Pi</a> tutorial, our tutorials are always open-source for learners. Like
					our facebook page to get more free tutorial updates.
				</p>
				<p>
					<div class="fb-page" data-href="https://www.facebook.com/dwijitsolutions" data-width="330" data-small-header="false" data-adapt-container-width="true"
					data-hide-cover="false" data-show-facepile="true">
						<div class="fb-xfbml-parse-ignore">
							<blockquote cite="https://www.facebook.com/dwijitsolutions"><a href="https://www.facebook.com/dwijitsolutions">Dwij IT Solutions</a></blockquote>
						</div>
					</div>
					<br>
					<br>
					<br>
				</p>
			</section>
			
			<section>
				<h2>From Python to RPi</h2>
				<ul class="left-align">
					<li>In Earlier presentation you have learned the basics of python</li>
					<li>Now we will go for various uses of python over RPi Hardware and more advanced stuff.</li>
				</ul>
			</section>

			<section>
				<h2>What are we going to learn:</h2>
				<ul class="left-align">
					<li>Various Python libraries for Raspberry Pi</li>
					<li>Hardware Setups (WiFi, USB)</li>
					<li>TKinter (User Interfaces)</li>
					<li>GPIO programming</li>
					<li>OpenCV (Computer Vision) programming</li>
				</ul>
			</section>
			
			<section data-background="#F56767" data-background-transition="zoom" data-transition="zoom">
				<h2 class="tdn">Python libraries for<br>Raspberry Pi</h2>
				<img src="images/python-snake-1.png" width="300">
			</section>
			
			<section>
				<h2>Python & Internet</h2>
				<ul class="left-align">
					<li>Use of HTTP (Hypertext Transfer Protocol)</li>
					<li>We need python-requests library. Lets install.</li>
					<li><pre><code>sudo apt-get install python-requests</code></pre></li>
					<li>Now open interpreter and import this library</li>
				</ul>
				<pre><code data-trim class="python">
>>> import requests as req
>>> r = req.get("http://google.com")
>>> r.status_code
200
>>> r.text 	# Print data fetched from site
				</code></pre>
			</section>
			
			<section>
				<h2>Request Status Codes</h2>
				<table>
					<tr><th>Code</th><th>Meaning</th></tr>
					<tr><td>200</td><td>OK</td></tr>
					<tr><td>301</td><td>Moved Permanently</td></tr>
					<tr><td>307</td><td>Moved Temporary</td></tr>
					<tr><td>401</td><td>Unauthorized</td></tr>
					<tr><td>404</td><td>Not Found</td></tr>
					<tr><td>500</td><td>Server Error</td></tr>
				</table>
			</section>
			
			<section>
				<h2>Weather Data Access</h2>
				<ul class="left-align">
					<li>We can use <a href="http://openweathermap.org/current">http://openweathermap.org/current</a></li>
					<li>We need web service link:</li>
					<li><pre><code>http://api.openweathermap.org/data/2.5/weather?q=Pune&appid=44db6a862fba0b067b1930da0d769e98</code></pre></li>
					<li>This will give information in JSON (JavaScript Object Notation) Format like below:</li>
				</ul>
				<pre><code data-trim class="overflow java">
{"coord":{"lon":73.86,"lat":18.52},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"base":"stations","main":{"temp":291.988,"pressure":950.59,"humidity":52,"temp_min":291.988,"temp_max":291.988,"sea_level":1025.4,"grnd_level":950.59},"wind":{"speed":2.31,"deg":279.501},"clouds":{"all":0},"dt":1457198019,"sys":{"message":0.0101,"country":"IN","sunrise":1457140797,"sunset":1457183515},"id":1259229,"name":"Pune","cod":200}
				</code></pre>
			</section>
			
			<section>
				<h2>Program</h2>
				<ul class="left-align">
					<li>Temperature in Kelvin; C = K – 273.15 </li>
				</ul>
				<pre><code data-trim class="python">
>>> import requests as rq
>>> import json
>>> r = rq.get("http://api.----/weather?q=Pune&appid=1111")
>>> info = json.loads(r.text)
>>> print info['main']['temp']
294.14
>>>
				</code></pre>
				<ul class="left-align">
					<li>Use this site to understand the json: <a href="http://json.parser.online.fr">http://json.parser.online.fr</a></li>
				</ul>
			</section>
			
			<section data-background="#F56767" data-background-transition="zoom" data-transition="zoom">
				<h2>Hardware Setups</h2>
				<img src="images/rpi-logo.png" class="nostyle" width="300">
			</section>
			
			<section>
				<h2 class="ttn">raspi-config</h2>
				<h5 class="ttn">(Raspberry Pi configuration tool)</h5>
				<ul class="left-align">
					<li><pre><code>$ sudo raspi-config</code></pre></li>
					<li>Detailed information on <a href="https://www.raspberrypi.org/documentation/configuration/raspi-config.md">raspberrypi.org</a></li>
				</ul>
			</section>
			
			<section>
				<h2>Enable SSH on RPi</h2>
				<ul class="left-align">
					<li>Enter following command in the terminal </li>
					<li><pre><code>$ sudo raspi-config</code></pre></li>
					<li>Navigate to Advanced Settings -> ssh. Hit Enter</li>
					<li>Enable ssh server</li>
				</ul>
			</section>
			
			<section>
				<h2>Auto mounting Pen-drives</h2>
				<ul class="left-align">
					<li>Enable bash commands:</li>
					<li><pre><code>sudo bash</code></pre></li>
					<li>Install library <a class="cred">usbmount</a> using apt-get</li>
					<li><pre><code>sudo apt-get install usbmount</code></pre></li>
					<li>Check for usb devices</li>
					<li><pre><code>df -h</code></pre></li>
				</ul>
			</section>
			
			<section>
				<pre><code data-trim>
root@raspberrypi:/home/pi/practice2/usb# df -h
Filesystem      Size  Used Avail Use% Mounted on
rootfs          7.2G  4.0G  2.9G  58% /
/dev/root       7.2G  4.0G  2.9G  58% /
devtmpfs        180M     0  180M   0% /dev
tmpfs            38M  212K   38M   1% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs            75M     0   75M   0% /run/shm
/dev/mmcblk0p1   56M   19M   38M  34% /boot
root@raspberrypi:/home/pi/practice2/usb# df -h
Filesystem      Size  Used Avail Use% Mounted on
rootfs          7.2G  4.0G  2.9G  58% /
/dev/root       7.2G  4.0G  2.9G  58% /
devtmpfs        180M     0  180M   0% /dev
tmpfs            38M  224K   38M   1% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs            75M     0   75M   0% /run/shm
/dev/mmcblk0p1   56M   19M   38M  34% /boot
/dev/sda1       2.0G     0  2.0G   0% /media/usb0 # Device found
				</code></pre>
			</section>
			
			<section>
				<h2>Unmount USB by Commands</h2>
				<ul class="left-align">
					<li>Before un-mounting make sure you got correct address</li>
					<li>Check devices using df -h</li>
				</ul>
				<pre><code data-trim class="python">
$ sudo umount /dev/sda1
				</code></pre>
			</section>
			
			<section>
				<h2>Unmount USB via Python</h2>
				<ul class="left-align">
					<li>Before un-mounting make sure you got correct address</li>
					<li>Here we need to load module subprocess</li>
				</ul>
				<pre><code data-trim class="python">
>>> from subprocess import call
>>> call(["umount", "/dev/sdb1"])
				</code></pre>
			</section>
			
			<section>
				<h2>Start Program at Rpi boot</h2>
				<ul class="left-align">
					<li>Here we are going to create new Cron Job</li>
					<li>Cron Jobs execute themselves when their time comes up</li>
					<li>To edit cron job file</li>
					<li><pre><code>$ sudo crontab -e</code></pre></li>
					<li>Now put new line into file like below</li>
					<li><pre><code>@reboot python /home/pi/MyScript.py &</code></pre></li>
					<li>Make sure you don’t create infinite processes here</li>
					<li>Note: Only parallel programs without keyboard activity</li>
				</ul>
			</section>
			
			<section>
				<h2>Start Program at Rpi boot 2</h2>
				<ul class="left-align">
					<li>Make system auto-login</li>
					<li><pre><code>$ sudo nano /etc/inittab</code></pre></li>
					<li>Comment this line</li>
					<li><pre><code>#1:2345:respawn:/sbin/getty 115200 tty1</code></pre></li>
					<li>Add new line</li>
					<li><pre><code>1:2345:respawn:/bin/login -f pi tty1 </dev/tty1 >/dev/tty1 2>&1</code></pre></li>
					<li>Save File by Ctrl + O and Ctrl + X</li>
				</ul>
			</section>
			
			<section>
				<h2>Start Program at Rpi boot 2</h2>
				<ul class="left-align">
					<li>Run script after auto-login </li>
					<li><pre><code>$ sudo nano /etc/profile</code></pre></li>
					<li>NoteAdd new line</li>
					<li><pre><code>/home/pi/your_script_name.sh</code></pre></li>
					<li>Save File by Ctrl + O and Ctrl + X</li>
				</ul>
			</section>
			
			<section>
				<h2>Create Shell Script to execute program</h2>
				<ul class="left-align">
					<li>Inside file <a class="cred">your_script_name.sh</a></li>
				</ul>
				<pre><code data-trim class="python">
#!/bin/bash
sleep 2
sudo python /home/pi/my_program.py
				</code></pre>
			</section>
			
			<section>
				<h2>WiFi Setup</h2>
				<img src="images/WiFi-EDUP.png" class="nostyle" alt="WiFi EDUP Dongle for Raspberry Pi">
				<ul class="left-align">
					<li>Use WiFi Dongle from <a class="cred">EDUP</a>. EDUP 802.11n</li>
					<li>Plug this dongle in one of USB Port</li>
					<li>To check weather wifi device is connected, use command <a class="cred">lsusb</a>. This will list all usb devices. Make sure yours is connected.</li>
					<li>To check if wifi is detected run <a class="cred">ifconfig</a> command</li>
				</ul>
			</section>
			
			<section>
				<h2 style="text-transform:lowercase;">ifconfig</h2>
				<pre><code data-trim class="fullw python">
wlan0     Link encap:Ethernet  HWaddr e8:4e:06:0d:c8:17
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:77 errors:0 dropped:8 overruns:0 frame:0
          TX packets:77 errors:0 dropped:3 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:11935 (11.6 KiB)  TX bytes:11935 (11.6 KiB)
				</code></pre>
				<ul class="left-align">
					<li>No IP Address</li>
				</ul>
			</section>
			
			<section>
				<h2>Step 1</h2>
				<ul class="left-align">
					<li>Run command:</li>
					<li><pre><code>$ sudo nano /etc/network/interfaces</code></pre></li>
					<li>You will see this:</li>
				</ul>
				<pre class="fullw"><code data-trim>
auto lo

iface lo inet loopback
iface eth0 inet dhcp
				</code></pre>
			</section>
			
			<section>
				<p>Edit this interfaces file to</p>
				<pre class="fullw"><code data-trim>
auto lo

iface lo inet loopback
iface eth0 inet dhcp

auto wlan0
allow-hotplug wlan0
iface wlan0 inet dhcp
wpa-ssid "My_WiFi_Name"
wpa-psk "My_WiFi_Password"
				</code></pre>
			</section>
			
			<section>
				<p>Now Reboot and check ifconfig</p>
				<pre class="fullw"><code data-trim>
wlan0     Link encap:Ethernet  HWaddr e8:4e:06:0d:c8:17
          inet addr:192.168.0.102  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:51 errors:0 dropped:2 overruns:0 frame:0
          TX packets:4 errors:0 dropped:1 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:8417 (8.2 KiB)  TX bytes:728 (728.0 B)
				</code></pre>
				<ul class="left-align">
					<li>The IP means we have successfully connected to Wifi</li>
				</ul>
			</section>
			
			<section>
				<h2>Date & Time Setup</h2>
				<ul class="left-align">
					<li>Raspberry Pi doesn’t have in-built RTC</li>
					<li>So it can’t show current time by itself</li>
					<li>Either we need to set time after an interval or use Real Time Clock (RTC) Hardware for time</li>
					<li>How to Set Time manually:</li>
					<li><pre><code>$ sudo date --set="Sat Aug 16 1:55:16 EDT 2014"</code></pre></li>
					<li>How to check current Date:</li>
					<li><pre><code>$ date</code></pre></li>
				</ul>
			</section>
			
			<section data-background="#F56767" data-background-transition="zoom" data-transition="zoom">
				<h2>TKinter (User Interfaces)</h2>
				<img src="images/tkinter-window.png" height="300">
			</section>
			
			<section>
				<h2>TKinter</h2>
				<ul class="left-align">
					<li>Only works in LXDE Graphics Environment</li>
					<li>Its in-built in Ubuntu, Rasbian & Mac</li>
					<li>More information about TKinter on <a href="https://wiki.python.org/moin/TkInter">https://wiki.python.org/moin/TkInter</a></li>
				</ul>
			</section>
			
			<section>
				<h2>Key & mouse events</h2>
				<img class="nostyle" src="images/tkinter-keyboard-mouse-click-detection.png" height="300">
			</section>
			
			<section>
				<p>Key & mouse events</p>
				<pre class="fullw fullh"><code data-trim class="python">
from Tkinter import *
root = Tk()

def key(event):
    print "pressed", repr(event.char), " keysym", event.keysym

def callback(event):
    frame.focus_set()
    print "clicked at", event.x, event.y

frame = Frame(root, width=100, height=100)
frame.bind("&lt;Key&gt;", key)		# bind event for key -> key()
frame.bind("&lt;Button-1&gt;", callback)	# bind event for mouse -> callback()
frame.pack()
root.mainloop()
				</code></pre>
			</section>
			
			<section>
				<h2>Button & Its Events</h2>
				<img class="nostyle" src="images/tkinter-button-event.png" height="300">
			</section>
			
			<section>
				<p>Button & Its Events</p>
				<pre class="fullw"><code data-trim class="python">
from Tkinter import *

def Call():
        lab= Label(root, text = 'You pressed\nthe button')
        lab.pack()
        button['bg'] = 'blue'
        button['fg'] = 'white'
root = Tk()
root.geometry('100x110+350+70')
button = Button(root, text = 'Press me', command = Call)
button.pack()

root.mainloop()
				</code></pre>
			</section>
			
			<section>
				<h2>TKinter</h2>
				<ul class="left-align">
					<li>More such example on <a href="https://wiki.python.org/moin/Intro%20to%20programming%20with%20Python%20and%20Tkinter">wiki.python.org</a></li>
				</ul>
			</section>
			
			<section data-background="#F56767" data-background-transition="zoom" data-transition="zoom">
				<h2>GPIO programming</h2>
				<img src="images/rpi-logo.png" class="nostyle" width="300">
			</section>
			
			<section>
				<h2>GPIO</h2>
				<h5>(General Purpose Input Output)</h5>
				<ul class="left-align">
					<li>Pins provided for external interfacing</li>
					<li>Python will let you access the pins by using Module called <a class="cred">RPi.GPIO</a></li>
					<li>It comes pre in-built. If not, use following commands with internet connectivity.</li>
				</ul>
				<pre class="fullw"><code data-trim class="python">
$ sudo apt-get install python-rpi.gpio
$ sudo apt-get update
				</code></pre>
			</section>
			
			<section>
				<h2>WARNING</h2>
				<ul class="left-align">
					<li>Do not short the GPIO Pins of RPi. Short circuit may damage your hardware.</li>
					<li>Do not connect LED or any other component directly without resisters in series.</li>
				</ul>
			</section>
			
			<section>
				<h2>GPIO PINS</h2>
				<img src="images/gpio-pins-pi2.jpg" class="nostyle" height="100"><br>
				<img src="images/gpio-numbers-pi2.png" class="nostyle" height="250">
				<p>Useful Website: <a href="http://pinout.xyz/">http://pinout.xyz</a></p>
			</section>
			
			<section>
				<img src="images/gpio-pins-detailed.png" class="nostyle" height="680" style="margin-top:-40px;">
			</section>
			
			<section>
				<h2>GPIO - HOW TO CONNECT</h2>
				<p>GPIO outputs are easy; they are on or off, HIGH or LOW, 3v or 0v.</p>
				<p>GPIO outputs are easy; they are on or off, HIGH or LOW, 3v or 0v.</p>
				<img src="images/gpio-led-pi2.png" class="nostyle" height="300">
			</section>
			
			<section>
				<h2>Root Access</h2>
				<ul class="left-align">
					<li>Run command:</li>
					<li><pre><code>$ sudo su</code></pre></li>
				</ul>
			</section>
			
			
			<section>
				<h2 class="ttn">Using GPIO Library</h2>
				<pre class="fullw"><code data-trim class="python">
#import library
import RPi.GPIO as GPIO

# set GPIO mode to BCM (Broadcom SOC channel)
GPIO.setmode(GPIO.BCM)

# set GPIO direction as Output
GPIO.setup(25, GPIO.OUT)

# set GPIO pin output as Low
GPIO.output(25, GPIO.LOW)
				</code></pre>
			</section>
			
			<section>
				<h2 class="ttn">blink.py</h2>
				<pre class="fullw"><code data-trim class="python">
import RPi.GPIO as GPIO
import time

GPIO.setmode(GPIO.BCM)

GPIO.setup(25, GPIO.OUT)

while True:
    GPIO.output(25, GPIO.LOW)
    time.sleep(1)
    GPIO.output(25, GPIO.HIGH)
    time.sleep(1)
				</code></pre>
			</section>
			
			<section>
				<h2 class="ttn">button.py</h2>
				<p>Don’t forget the pull-down resistor, which goes between ground and the input pin</p>
				<pre class="fullw"><code data-trim class="python">
import RPi.GPIO as GPIO
import time

GPIO.setmode(GPIO.BCM)
GPIO.setwarnings(False)

GPIO.setup(7, GPIO.OUT)
GPIO.setup(8, GPIO.IN)

count = 0

while True:
    val = GPIO.input(8)
    if(val == True):
        count = count + 1
        print("Button pressed.", str(count))
        GPIO.output(7, GPIO.HIGH)
    else:
        GPIO.output(7, GPIO.LOW)
    time.sleep(0.01)
				</code></pre>
			</section>
			
			<section>
				<h2 class="ttn">button_sound.py</h2>
				<pre class="fullw"><code data-trim class="python">
import pygame.mixer as mx
import RPi.GPIO as GPIO
from time import sleep
from sys import exit

GPIO.setmode(GPIO.BCM)
GPIO.setwarnings(False)

GPIO.setup(7, GPIO.OUT)
GPIO.setup(8, GPIO.IN)

mx.init(48000, -16, 1, 1024)

sound1 = mx.Sound("/usr/share/sounds/alsa/Front_Center.wav")

soundCh = mx.Channel(1)

while True:
    try:
        if(GPIO.input(8) == True):
            soundCh.play(sound1)
            GPIO.output(7, GPIO.HIGH)
        sleep(0.01)
    except KeyboardInterrupt:
        GPIO.output(7, GPIO.LOW)
        exit()
				</code></pre>
			</section>
			
			<section>
				<h2>Enabling sound via Sound Port</h2>
				<ul class="left-align">
					<li>Via analog output port</li>
					<li><pre><code>$ sudo amixer cset numid=3 1</code></pre></li>
					<li>Via HDMI Cable</li>
					<li><pre><code>$ sudo amixer cset numid=3 2</code></pre></li>
				</ul>
			</section>
			
			<section>
				<h3 class="ttn">16×2 LCD interfacing with Raspberry Pi</h3>
				<img src="images/lcd-interfacing.jpg" alt="LCD Interfacing on Raspberry Pi" width="600">
			</section>
			
			<section>
				<h3 class="ttn">16×2 LCD interfacing with Raspberry Pi</h3>
				<pre class="fullw fullh"><code data-trim class="python">
# Reference: http://dwij.co.in/lcd-interfacing-with-raspberry-pi
# The wiring for the LCD is as follows:
# 1 : GND
# 2 : 5V
# 3 : Contrast (0-5V)*
# 4 : RS (Register Select)
# 5 : R/W (Read Write)       - GROUND THIS PIN
# 6 : Enable or Strobe
# 7 : Data Bit 0             - NOT USED
# 8 : Data Bit 1             - NOT USED
# 9 : Data Bit 2             - NOT USED
# 10: Data Bit 3             - NOT USED
# 11: Data Bit 4
# 12: Data Bit 5
# 13: Data Bit 6
# 14: Data Bit 7
# 15: LCD Backlight +5V**
# 16: LCD Backlight GND

#import
import RPi.GPIO as GPIO
import time

# Define GPIO to LCD mapping
LCD_RS = 7
LCD_E  = 8
LCD_D4 = 25
LCD_D5 = 24
LCD_D6 = 23
LCD_D7 = 18

# Define some device constants
LCD_WIDTH = 16    # Maximum characters per line
LCD_CHR = True
LCD_CMD = False

LCD_LINE_1 = 0x80 # LCD RAM address for the 1st line
LCD_LINE_2 = 0xC0 # LCD RAM address for the 2nd line

# Timing constants
E_PULSE = 0.00005
E_DELAY = 0.00005

def main():
  # Main program block
  GPIO.setwarnings(False)
  GPIO.setmode(GPIO.BCM)       # Use BCM GPIO numbers
  GPIO.setup(LCD_E, GPIO.OUT)  # E
  GPIO.setup(LCD_RS, GPIO.OUT) # RS
  GPIO.setup(LCD_D4, GPIO.OUT) # DB4
  GPIO.setup(LCD_D5, GPIO.OUT) # DB5
  GPIO.setup(LCD_D6, GPIO.OUT) # DB6
  GPIO.setup(LCD_D7, GPIO.OUT) # DB7

  # Initialise display
  lcd_init()

  # Send some test
  lcd_byte(LCD_LINE_1, LCD_CMD)
  lcd_string("Dwij IT Solution")
  lcd_byte(LCD_LINE_2, LCD_CMD)
  lcd_string("Ganesh Bhosale")

  time.sleep(10) # 10 second delay

  # Send some text
  lcd_byte(LCD_LINE_1, LCD_CMD)
  lcd_string("Raspberry Pi in")
  lcd_byte(LCD_LINE_2, LCD_CMD)
  lcd_string("Pune, India")

  time.sleep(10)
  # main function ends

def lcd_init():
  # Initialise display
  lcd_byte(0x33,LCD_CMD)
  lcd_byte(0x32,LCD_CMD)
  lcd_byte(0x28,LCD_CMD)
  lcd_byte(0x0C,LCD_CMD)
  lcd_byte(0x06,LCD_CMD)
  lcd_byte(0x01,LCD_CMD)

def lcd_string(message):
  # Send string to display

  message = message.ljust(LCD_WIDTH," ")

  for i in range(LCD_WIDTH):
    lcd_byte(ord(message[i]),LCD_CHR)

def lcd_byte(bits, mode):
  # Send byte to data pins
  # bits = data
  # mode = True  for character
  #        False for command

  GPIO.output(LCD_RS, mode) # RS

  # High bits
  GPIO.output(LCD_D4, False)
  GPIO.output(LCD_D5, False)
  GPIO.output(LCD_D6, False)
  GPIO.output(LCD_D7, False)
  if bits&0x10==0x10:
    GPIO.output(LCD_D4, True)
  if bits&0x20==0x20:
    GPIO.output(LCD_D5, True)
  if bits&0x40==0x40:
    GPIO.output(LCD_D6, True)
  if bits&0x80==0x80:
    GPIO.output(LCD_D7, True)

  # Toggle 'Enable' pin
  time.sleep(E_DELAY)
  GPIO.output(LCD_E, True)
  time.sleep(E_PULSE)
  GPIO.output(LCD_E, False)
  time.sleep(E_DELAY)

  # Low bits
  GPIO.output(LCD_D4, False)
  GPIO.output(LCD_D5, False)
  GPIO.output(LCD_D6, False)
  GPIO.output(LCD_D7, False)
  if bits&0x01==0x01:
    GPIO.output(LCD_D4, True)
  if bits&0x02==0x02:
    GPIO.output(LCD_D5, True)
  if bits&0x04==0x04:
    GPIO.output(LCD_D6, True)
  if bits&0x08==0x08:
    GPIO.output(LCD_D7, True)

  # Toggle 'Enable' pin
  time.sleep(E_DELAY)
  GPIO.output(LCD_E, True)
  time.sleep(E_PULSE)
  GPIO.output(LCD_E, False)
  time.sleep(E_DELAY)

if __name__ == '__main__':
  main()
				</code></pre>
			</section>
			
			
			
			
			
			
			
			
			
			
			
			
			
			<section data-background="#F56767" data-background-transition="zoom" data-transition="zoom">
				<h2>OpenCV (Computer Vision) Programming using Python</h2>
				<img src="images/opencv-python.png" height="300">
			</section>
			
            <!--
			<section>
				<h2>Installation of OpenCV</h2>
				<ul class="left-align">
					<li>Linux*</li>
					<li>Windows</li>
					<li>Mac OSX</li>
				</ul>
			</section>
			
			<section>
				<h2>OpenCV Installation on Linux</h2>
				<ul class="left-align">
					<li>Download OpenCV from <a href="http://opencv.org/downloads.html" target="_blank">http://opencv.org/downloads.html</a></li>
					<li>Details <a href="http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation" target="_blank">install documentation</a> here.</li>
					<li>Requirements: GCC 4.4.x or later, CMake 2.6 or higher, Python 2.6 or later, Git</li>
				</ul>
			</section>
			
			<section>
				<h2>Downloading dependancies (Linux)</h2>
				<pre><code>
$ sudo apt-get install build-essential
$ sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev
$ sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev
				</code></pre>
			</section>
			
			<section>
				<h2>INSTALL START (Linux)</h2>
				<p>Unzip the donwloaded file.</p>
				<pre><code>
$ cd /opencv
$ mkdir release
$ cd release
$ cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_NEW_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON ..
				</code></pre>
				<p>Dont forget <a class="cred">BUILD_NEW_PYTHON_SUPPORT=ON</a></p>
			</section>
			
			<section>
				<h2>INSTALL FINISHING (Linux)</h2>
				<pre><code>
$ make
$ sudo make install
$ export PYTHONPATH=/usr/local/lib/python2.7/site-packages/:$PYTHONPATH
				</code></pre>
			</section>
			
			<section data-background="#F56767" data-background-transition="zoom" data-transition="zoom">
				<h2>OpenCV Programming</h2>
			</section>
			
			<section>
				<h2>Opening Image</h2>
				<pre><code>import cv2 as cv

cv.namedWindow("camera", 1)

img = cv.LoadImage ("test.png")

cv.ShowImage("camera", img)
cv.WaitKey(0)
cv.DestroyAllWindows()
				</code></pre>
			</section>
			
			<section>
				<h2>Capture Image from Camera</h2>
				<pre><code>import cv
import time

capture = cv.CaptureFromCAM(0)

width = 640
height = 480

cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_WIDTH,width)
cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_HEIGHT,height)

if capture:
    cv.NamedWindow("camera", 1)
    
    print "Press any key to start..."
    cv.WaitKey(0);
    
    img = cv.QueryFrame(capture)
    if not img:
        print "Frame is NULL"
    else:
        cv.ShowImage("camera", img)
        cv.WaitKey(0)
else:
    print "Capture is NULL"

cv.DestroyAllWindows()
				</code></pre>
			</section>
			
			<section>
				<h2>Capture Camera Video</h2>
				<pre><code>import cv
import time

cv.NamedWindow("camera", 1)

capture = cv.CreateCameraCapture(0)
#capture = cv.CaptureFromFile("tera.mp4")

width = 160
height = 120

cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_WIDTH,width)
cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_HEIGHT,height)

if capture:
    while True:
        img = cv.QueryFrame(capture)
        cv.ShowImage("camera", img)
        if cv.WaitKey(10) == 27:
            break
else:
    print "Capture is NULL"

cv.DestroyAllWindows()

				</code></pre>
			</section>
			
			<section>
				<h2>Face Detection in Camera</h2>
				<pre><code># The program finds faces in a camera image or video stream and displays a red box around them.

import sys
import cv2 as cv
from optparse import OptionParser

min_size = (20, 20)
image_scale = 2
haar_scale = 1.2
min_neighbors = 2
haar_flags = 0

def Load():
	return (faceCascade, eyeCascade, mouthCascade)

def detect_and_draw(img, cascade):
    print "detect_and_draw";
    # allocate temporary images
    gray = cv.CreateImage((img.width,img.height), 8, 1)
    small_img = cv.CreateImage((cv.Round(img.width / image_scale),
			       cv.Round (img.height / image_scale)), 8, 1)

    # convert color input image to grayscale
    cv.CvtColor(img, gray, cv.CV_BGR2GRAY)

    # scale input image for faster processing
    cv.Resize(gray, small_img, cv.CV_INTER_LINEAR)
    cv.EqualizeHist(small_img, small_img)

    if(cascade):
        t = cv.GetTickCount()
        faces = cv.HaarDetectObjects(small_img, cascade, cv.CreateMemStorage(0),
                                     haar_scale, min_neighbors, haar_flags, min_size)
        t = cv.GetTickCount() - t
        print "time taken for detection = %gms" % (t/(cv.GetTickFrequency()*1000.))
        if faces:
            for ((x, y, w, h), n) in faces:
                # the input to cv.HaarDetectObjects was resized, so scale the
                # bounding box of each face and convert it to two CvPoints
                pt1 = (int(x * image_scale), int(y * image_scale))
                pt2 = (int((x + w) * image_scale), int((y + h) * image_scale))
                cv.Rectangle(img, pt1, pt2, cv.RGB(255, 0, 0), 3, 8, 0)

    cv.ShowImage("video", img)

if __name__ == '__main__':

    parser = OptionParser(usage = "usage: %prog [options] [filename|camera_index] e.g. python TestFaceRec.py --cascade=face.xml 0")
    parser.add_option("-c", "--cascade", action="store", dest="cascade", type="str", help="Haar cascade file, default %default", default = "haarcascades/haarcascade_frontalface_alt.xml")
    (options, args) = parser.parse_args()

    cascade = cv.Load(options.cascade)

    if len(args) != 1:
        parser.print_help()
        sys.exit(1)
    
    #size of the video
    width = 640
    height = 480

    input_name = args[0]
    if input_name.isdigit():
        capture = cv.CreateCameraCapture(int(input_name))
        if width is None:
            width = int(cv.GetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_WIDTH))
        else:
            cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_WIDTH,width)
    
        if height is None:
            height = int(cv.GetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_HEIGHT))
        else:
            cv.SetCaptureProperty(capture,cv.CV_CAP_PROP_FRAME_HEIGHT,height)
    else:
        capture = None

    cv.NamedWindow("video", 1)
    
    if capture:
        frame_copy = None
        print "Press any key to start..."
        cv.WaitKey(0);
        while True:
            frame = cv.QueryFrame(capture)
            if not frame:
                #print "Error: NULL Frame Captured !!!";
                continue
            if not frame_copy:
                frame_copy = cv.CreateImage((frame.width,frame.height),
                                            cv.IPL_DEPTH_8U, frame.nChannels)

            if frame.origin == cv.IPL_ORIGIN_TL:
                cv.Copy(frame, frame_copy)
            else:
                cv.Flip(frame, frame_copy, 0)

            detect_and_draw(frame_copy, cascade)

            if cv.WaitKey(10) >= 0:
                break
    else:
        image = cv.LoadImage(input_name, 1)
        detect_and_draw(image, cascade)
        cv.WaitKey(0)

    cv.DestroyWindow("video")

				</code></pre>
			</section>
			
			<section>
				<h2>Face Detection Output</h2>
				<img src="http://docs.opencv.org/master/face.jpg" alt="Face Detection using OpenCV">
			</section>

            -->

			<section>
				<h2>References</h2>
				<ul>
					<li><a target="_blank" href="https://www.python.org">python.org</a></li>
					<li><a target="_blank" href="http://raspberrypi.org/">raspberrypi.org</a></li>
					<li><a target="_blank" href="http://opencv.org">opencv.org</a></li>
				</ul>
			</section>

			<section style="text-align: left;">
				<h1>Thank you</h1>
				<p>
					- <a target="_blank" href="https://ganeshbhosale.com">Ganesh Bhosale</a> <br>
					- <a target="_blank" href="http://dwijitsolutions.com">Dwij IT Solutions</a>
				</p>
				<p>Did you liked this tutorial ?</p>
				<p>
					<div class="fb-like" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
				</p>
				<p>Checkout more such tutorials on: <a href="http://dwij.net/tuts">http://dwij.net/tuts</a></p>
				<!--<div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>-->
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// Full list of configuration options available at:
		// https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			slideNumber: 'c/t',
			controls: true,
			progress: true,
			history: true,
			center: true,

			transition: 'slide', // none/fade/slide/convex/concave/zoom

			// Optional reveal.js plugins
			dependencies: [
				{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: 'plugin/zoom-js/zoom.js', async: true },
				{ src: 'plugin/notes/notes.js', async: true }
			]
		});
	</script>

	<div class="share-reveal">
		<a target="_blank" class="share-reveal-editor" href="http://dwijitsolutions.com">Powered by Dwij IT Solutions</a>
		<a target="_blank" class="share-reveal-facebook" href="https://www.facebook.com/DwijItSolutions">
			<svg viewBox="-8 -8 48 48" width="20" height="20" version="1.1" xmlns="http://www.w3.org/2000/svg">
				<path fill="#666666" d="M25.613-4.557c0,0-3.707,0-6.166,0c-3.662,0-7.732,1.535-7.732,6.835c0.019,1.845,0,3.613,0,5.603H7.481 v6.728h4.366v19.37h8.021V14.48h5.295l0.479-6.618h-5.913c0,0,0.016-2.946,0-3.8c0-2.093,2.184-1.974,2.312-1.974 c1.042,0,3.059,0.003,3.578,0v-6.646H25.613z"/>
			</svg>
		</a>
		<a target="_blank" class="share-reveal-facebook" href="https://twitter.com/gdbhosale">
			<svg viewBox="0 0 2000 1625.36" width="20" height="20" version="1.1" xmlns="http://www.w3.org/2000/svg">
				<path fill="#666666" d="m 1999.9999,192.4 c -73.58,32.64 -152.67,54.69 -235.66,64.61 84.7,-50.78 149.77,-131.19 180.41,-227.01 -79.29,47.03 -167.1,81.17 -260.57,99.57 C 1609.3399,49.82 1502.6999,0 1384.6799,0 c -226.6,0 -410.328,183.71 -410.328,410.31 0,32.16 3.628,63.48 10.625,93.51 -341.016,-17.11 -643.368,-180.47 -845.739,-428.72 -35.324,60.6 -55.5583,131.09 -55.5583,206.29 0,142.36 72.4373,267.95 182.5433,341.53 -67.262,-2.13 -130.535,-20.59 -185.8519,-51.32 -0.039,1.71 -0.039,3.42 -0.039,5.16 0,198.803 141.441,364.635 329.145,402.342 -34.426,9.375 -70.676,14.395 -108.098,14.395 -26.441,0 -52.145,-2.578 -77.203,-7.364 52.215,163.008 203.75,281.649 383.304,284.946 -140.429,110.062 -317.351,175.66 -509.5972,175.66 -33.1211,0 -65.7851,-1.949 -97.8828,-5.738 181.586,116.4176 397.27,184.359 628.988,184.359 754.732,0 1167.462,-625.238 1167.462,-1167.47 0,-17.79 -0.41,-35.48 -1.2,-53.08 80.1799,-57.86 149.7399,-130.12 204.7499,-212.41"></path>
			</svg>
		</a>
	</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-31231580-28', 'auto');
  ga('send', 'pageview');
</script>
</body>

</html>
